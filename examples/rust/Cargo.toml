[package]
name = "mavcodegen_rust_example"
description = "Example crate with sources autogenerated by MAVCodeGen"
version = "0.1.0-alpha1"
edition = "2021"
authors = ["Mykhailo Ziatin <ziatin@mathwithoutend.org>"]
readme = "README.md"
publish = false
resolver = "2"

[lib]
name = "rust_example"
path = "src/lib.rs"

[[bin]]
name = "rust_example"
path = "src/bin/rust_example.rs"

###########################################################
# Dependencies
###########################################################
[dependencies]
mavlib_spec = { path = "../../mavlib_spec" }
serde = { version = "1.0.193", default-features = false, features = ["derive"], optional = true }
serde_arrays = { version = "0.1.0", default-features = false, optional = true }
tbytes = { version = "0.1.0-alpha1", default-features = false }

[dev-dependencies]
log = "0.4.20"
env_logger = "0.10.1"

[build-dependencies]
cargo-manifest = "0.12.1"
mavcodegen = { path = "../../mavcodegen", default-features = false, features = ["rust", "build_utils"] }
serde = "1.0.193"
toml = "0.8.8"

###########################################################
# Features
###########################################################
[features]
## Default features
default = ["minimal"]
## Enables serde support.
serde = [
    "dep:serde",
    "dep:serde_arrays",
]

###########################################################
# Dialects
###########################################################
## Include `common` dialect
common = ["minimal"]
## Include custom `MAVSpec_test` dialect
mav_spec_test = ['standard']
## Include `minimal` dialect
minimal = []
## Include `standard` dialect
standard = ["minimal"]

###########################################################
# Metadata
###########################################################
[package.metadata.mavcodegen]
messages = ["HEARTBEAT", "PROTOCOL_VERSION", "MAV_SPEC_V1", "COMMAND_INT", "COMMAND_LONG"]
all_enums = false
